#include <pthread.h>#include <signal.h>#include <stdio.h>#include <time.h>#include <unistd.h>#define TIMER_PRIORITY 50// Event handler for timervoid event_handler(union sigval value){    struct timespec time;    // Get the time    if(clock_gettime(CLOCK_MONOTONIC, &time))    {        perror("clock_gettime");        return;    }    printf("%u.%09u\n", time.tv_sec, time.tv_nsec);}int main(void){    struct sigevent     event;          // Event configuration    pthread_attr_t      thread_attr;    // Thread attributes    struct sched_param  thread_param;   // Thread scheduling parameters    timer_t             timer;    struct itimerspec   timer_spec;     // Timer specification    // Configure thread attributes    if(pthread_attr_init(&thread_attr) == -1)    {        perror("pthread_attr_init");        return(1);    }    pthread_attr_setinheritsched(&thread_attr, PTHREAD_EXPLICIT_SCHED);    pthread_attr_setschedpolicy( &thread_attr, SCHED_FIFO);    sched_getparam(getpid(), &thread_param);    thread_param.sched_priority = TIMER_PRIORITY;    pthread_attr_setschedparam(&thread_attr, &thread_param);    // Configure event handler    event.sigev_notify              = SIGEV_THREAD;    event.sigev_notify_attributes   = &thread_attr;    event.sigev_notify_function     = &event_handler;    event.sigev_value.sival_ptr     = &timer;    // Configure timer specification    timer_spec.it_value.tv_sec      = 0;    timer_spec.it_value.tv_nsec     = 1000000;  // 1 ms    timer_spec.it_interval.tv_sec   = 0;    timer_spec.it_interval.tv_nsec  = 1000000;  // 1 ms    // Create timer    if(timer_create(CLOCK_MONOTONIC, &event, &timer))    {        perror("timer_create");        pthread_attr_destroy(&thread_attr);        return(1);    }    // Start the timer    if(timer_settime(timer, 0, &timer_spec, NULL))    {        perror("timer_settime");        timer_delete(timer);        pthread_attr_destroy(&thread_attr);        return(1);    }    pthread_attr_destroy(&thread_attr);    // Wait while the timer runs    sleep(1);    // Stop the timer    timer_delete(timer);    return(0);}// EOF